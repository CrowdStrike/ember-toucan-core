{{!
  Regarding Conditionals

  This looks really messy, but Form::Fields::Autocomplete exposes named blocks; HOWEVER,
  we cannot conditionally render named blocks due to https://github.com/emberjs/rfcs/issues/735.

  We *can* conditionally render components though, based on the blocks and argument combinations
  users provide us.  This is very brittle, but until https://github.com/emberjs/rfcs/issues/735
  is resolved and a solution is found, this appears to be the only way to truly expose
  conditional named blocks.

  ---

  Regarding glint-expect-error

  "@onChange" of the component expects a string or object typed value, but field.setValue is generic,
  accepting anything that DATA[KEY] could be. Similar case with "@selected", but there casting is easy.
}}
<@form.Field @name={{@name}} as |field|>
  {{#if (this.hasOnlyLabelBlock (has-block 'label') (has-block 'hint'))}}
    <Form::Fields::Autocomplete
      @contentClass={{@contentClass}}
      @error={{this.mapErrors field.rawErrors}}
      @hint={{@hint}}
      @isDisabled={{@isDisabled}}
      @isReadOnly={{@isReadOnly}}
      @label={{@label}}
      @noResultsText={{@noResultsText}}
      {{! @glint-expect-error }}
      @onChange={{field.setValue}}
      @onFilter={{@onFilter}}
      @options={{@options}}
      @rootTestSelector={{@rootTestSelector}}
      @selected={{this.assertSelected field.value}}
      name={{@name}}
      ...attributes
    >
      <:label>{{yield to='label'}}</:label>
      <:default as |autocomplete|>
        {{yield (hash Option=autocomplete.Option option=autocomplete.option)}}
      </:default>
    </Form::Fields::Autocomplete>
  {{else if (this.hasHintAndLabelBlocks (has-block 'label') (has-block 'hint'))
  }}
    <Form::Fields::Autocomplete
      @contentClass={{@contentClass}}
      @error={{this.mapErrors field.rawErrors}}
      @hint={{@hint}}
      @isDisabled={{@isDisabled}}
      @isReadOnly={{@isReadOnly}}
      @label={{@label}}
      @noResultsText={{@noResultsText}}
      {{! @glint-expect-error }}
      @onChange={{field.setValue}}
      @onFilter={{@onFilter}}
      @options={{@options}}
      @rootTestSelector={{@rootTestSelector}}
      @selected={{this.assertSelected field.value}}
      name={{@name}}
      ...attributes
    >
      <:label>{{yield to='label'}}</:label>
      <:hint>{{yield to='hint'}}</:hint>
      <:default as |autocomplete|>
        {{yield (hash Option=autocomplete.Option option=autocomplete.option)}}
      </:default>
    </Form::Fields::Autocomplete>
  {{else if (this.hasLabelArgAndHintBlock @label (has-block 'hint'))}}
    <Form::Fields::Autocomplete
      @contentClass={{@contentClass}}
      @error={{this.mapErrors field.rawErrors}}
      @hint={{@hint}}
      @isDisabled={{@isDisabled}}
      @isReadOnly={{@isReadOnly}}
      @label={{@label}}
      @noResultsText={{@noResultsText}}
      {{! @glint-expect-error }}
      @onChange={{field.setValue}}
      @onFilter={{@onFilter}}
      @options={{@options}}
      @rootTestSelector={{@rootTestSelector}}
      @selected={{this.assertSelected field.value}}
      name={{@name}}
      ...attributes
    >
      <:hint>{{yield to='hint'}}</:hint>
      <:default as |autocomplete|>
        {{yield (hash Option=autocomplete.Option option=autocomplete.option)}}
      </:default>
    </Form::Fields::Autocomplete>
  {{else}}
    {{! Argument-only case }}
    <Form::Fields::Autocomplete
      @contentClass={{@contentClass}}
      @error={{this.mapErrors field.rawErrors}}
      @hint={{@hint}}
      @isDisabled={{@isDisabled}}
      @isReadOnly={{@isReadOnly}}
      @label={{@label}}
      @noResultsText={{@noResultsText}}
      {{! @glint-expect-error }}
      @onChange={{field.setValue}}
      @onFilter={{@onFilter}}
      @options={{@options}}
      @rootTestSelector={{@rootTestSelector}}
      @selected={{this.assertSelected field.value}}
      name={{@name}}
      ...attributes
      as |autocomplete|
    >
      {{yield (hash Option=autocomplete.Option option=autocomplete.option)}}
    </Form::Fields::Autocomplete>
  {{/if}}
</@form.Field>